/*! dream - v0.0.0 - 2014-08-24
* Copyright (c) 2014 Darby Perez; Licensed  */
var Dream=Dream||{};Dream.document=document,Dream.window=window,function(){function a(){return++g}function b(a,b){for(var c in b)"function"==typeof a&&b.hasOwnProperty(c)?a.prototype[c]=b[c]:b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function c(a){return function(){var b=arguments[0];b&&a.prototype[b].apply(this,f.call(arguments,1))}}function d(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function e(){}var f=Array.prototype.slice,g=Date.now()||+new Date;Dream.util={extend:b,createCanvasElement:function(){return Dream.document.createElement("canvas")},createClass:function(){var a,d=f.call(arguments,0),g=0,h=function(){this.initialize.apply(this,arguments)};return h.prototype.initialize=function(){},h.prototype.constructor=h,"function"==typeof d[g]&&(a=d[g],e.prototype=a.prototype,e.prototype.callSuper=c(a),h.prototype=new e,g++),b(h,d[g]),h},addEvent:function(a,b,c){Dream.window.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c,!1)},getCoords:function(a,b){var c=a.top,d=a.left;return a instanceof Element&&a.nodeType&&(c=a.offsetTop,d=a.offsetLeft),{x:b.x-d,y:b.y-c}},getColor:function(){return d()},uid:function(){return a()}}}(),function(){Dream.Canvas=Dream.util.createClass({_height:0,_width:0,_canvas:null,_canvasContext:null,initialize:function(a){this._setupCanvas(a)},_setupCanvas:function(){this._canvas=Dream.util.createCanvasElement(),this._canvasContext=this._canvas.getContext("2d")}})}(),function(){Dream.Layer=Dream.util.createClass({_dirty:!1,_canvas:null,_hitCanvas:null,_objects:[],_colorMap:{},_scape:null,left:0,top:0,name:"layer",backgroundColor:"",initialize:function(a){a=a||{},this._setOptions(a),this._setupCanvasDOM(),a.width&&a.height&&(this.setCanvasDimensions(a.width,a.height),this.setStyleDimensions(a.width,a.height)),a.top&&a.left&&this.setStyleCoords(a.left,a.top)},add:function(a){a.layer=this,this._objects.push(a)},getObjects:function(){return this._objects},fitToScape:function(){if(this._scape){var a=this._scape;this.left=0,this.top=0,this.setCanvasDimensions(a.width,a.height),this.setStyleDimensions(a.width,a.height),this.setStyleCoords(this.left,this.top)}},render:function(){for(var a=this._canvasContext,b=0;b<this._objects.length;b++)this._objects[b].render(a)},setCanvasDimensions:function(a,b){this._canvas.width=a,this._canvas.height=b},setStyleDimensions:function(a,b){this._canvas.style.width=a+"px",this._canvas.style.height=b+"px"},setStyleCoords:function(a,b){this._canvas.style.top=b+"px",this._canvas.style.left=a+"px"},getCanvasDOM:function(){return this._canvas},getCanvasContext:function(){return this._canvasContext},colorMap:function(){return this._colorMap},_setupCanvasDOM:function(){this._canvas=Dream.util.createCanvasElement(),this._canvas.id=this.name,this._canvasContext=this._canvas.getContext("2d"),this._canvas.style.position="absolute"},_setupObjectHit:function(a){for(var b=Dream.util.getColor();this._colorMap[b];)b=Dream.util.getColor();a._hitColor=b,this._colorMap[b]=a},_setOptions:function(a){Dream.util.extend(this,a)}})}(),function(){Dream.Object=Dream.util.createClass({_events:!0,_hitColor:"",width:0,height:0,top:0,left:0,fill:"",initialize:function(a){this.id=Dream.util.uid(),this._setOptions(a||{})},_setOptions:function(a){Dream.util.extend(this,a)},render:function(){}})}(),function(){Dream.Rect=Dream.util.createClass(Dream.Object,{type:"dream-rect",initialize:function(a){this.callSuper("initialize",a)},render:function(a){a.save(),a.translate(this.top,this.left),a.rect(0,0,this.width,this.height),a.fillStyle=this.fill,a.fill(),a.restore()}})}(),function(){Dream.Scape=Dream.util.createClass({_layers:[],_events:!0,_dom:null,type:"scape",width:0,height:0,initialize:function(a,b){this._setDOM(a),this.setDimensions(b),this._setOptions(b),this._initListeners()},setDimensions:function(a){a&&a.height&&a.width?(this.width=a.width,this.height=a.height,this._setDOMStyle(this.width,this.height)):(this.width=this._dom.scrollWidth,this.height=this._dom.scrollHeight)},renderAll:function(){for(var a=0;a<this._layers.length;a++)this._layers[a].render()},_setDOMStyle:function(a,b){this._dom.style.width=a+"px",this._dom.style.height=b+"px",this._dom.style.position="absolute"},_setOptions:function(a){Dream.util.extend(this,a)},_setDOM:function(a){this._dom=Dream.document.getElementById(a)},addLayer:function(a){a._scape=this,this._dom.appendChild(a.getCanvasDOM()),this._layers.push(a)}})}(),function(){{var a="mousedown",b="mouseup",c="mouseover",d="mouseout",e="mousemove",f=[a,b,c,d,e];f.length}Dream.util.extend(Dream.Object,{_eventHandlers:{},_initListeners:function(){},_mousedown:function(a){var b=Dream.util.getCoords(this,a);console.log("mousedown",b)},_mouseup:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseup",b)},_mouseover:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseover",b)},_mouseout:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseleave",b)},_mousemove:function(){}})}(),function(){var a="_",b="mousedown",c="mouseup",d="mouseover",e="mouseout",f="mousemove",g=[b,c,d,e,f],h=g.length;Dream.util.extend(Dream.Scape,{_initListeners:function(){for(var b=0;h>b;b++)Dream.util.addEvent(this._dom,g[b],this[a+g[b]])},_mousedown:function(a){var b=Dream.util.getCoords(this,a);console.log("mousedown",b)},_mouseup:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseup",b)},_mouseover:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseover",b)},_mouseout:function(a){var b=Dream.util.getCoords(this,a);console.log("mouseleave",b)},_mousemove:function(){}})}();